{% extends "base.html" %}

{% block main_content %}
<form method="POST" action="{{ url_for('create_party') }}">
    <fieldset>
        <legend>Party Details</legend>

        <label for="party_name">Party Name</label>
        <input type="text" id="party_name" name="party_name"><br>

        <label for="party_goal">Party Goal (number of problems)</label>
        <input type="number" id="party_goal" name="party_goal" required><br>

        <label for="party_start">Start Date</label>
        <input type="date" id="party_start" name="party_start" required><br>

        <label for="party_end">End Date</label>
        <input type="date" id="party_end" name="party_end" required><br>
    </fieldset>

    <fieldset>
        <legend>Invite Friends</legend>

        {% if connections %}
            {% for user in connections %}
                {% if user.in_party %}
                    <label style="color:gray;">
                        {{ user.lc_username }} (Already in this party)
                    </label><br>
                {% else %}
                    {# create a unique id for each checkbox #}
                    <input type="checkbox" 
                           id="invite_{{ user.pid }}" 
                           name="invitees" 
                           value="{{ user.pid }}">
                    <label for="invite_{{ user.pid }}">{{ user.lc_username }}</label><br>
                {% endif %}
            {% endfor %}
        {% else %}
            <p>You have no connections to invite.</p>
        {% endif %}
    </fieldset>

    <button type="submit">Create Party & Invite</button>
</form>
{% endblock %}
